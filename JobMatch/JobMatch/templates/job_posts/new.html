{% extends 'company_account_base.html' %}

{% block title %}<title>Company User Dashboard</title>{% endblock %}

{% block head %}

<!-- this links the tinymce javascript for the text editor -->
{{ form.media }}

<!-- google places autocomplete -->
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places&key=AIzaSyD2SrQatxg5NRBSxInBE_vI7FfUp8DoGUA"></script>

{% endblock %}

{% block body %}
	<div class="row mb-4">
		<div class="col-2"></div>
		<div class="col-8">
			<div class="card card-body mb-4">
				<h5 class="card-title">New Job Post</h5>
				<form method="POST">

					<div class="form-group">
						<label>Job Title</label>
						{{ form.job_title }}
					</div>

					<div class="form-group">
						<div class="row">
							<div class="col">
								<label>Industry</label>
								{{ form.industry }}
							</div>
							<div class="col">
								<label>Employment Type</label>
								{{ form.employment_type }}
							</div>
						</div>
					</div>

					<div class="form-group">
						<label>Description</label>
						{{ form.description }}
					</div>

					<div class="form-group">
						<label>Location</label>
						{{ form.location }}
					</div>

					<div class="form-group">
						<div class="row">
							<div class="col">
								<label>Search for skills</label>
								<input type="text" class="form-control" id='skill-search' name="skill-search">
								<div class="card">
									<p class="text-muted text-center">Results</p>

								</div>
							</div>
							<div class="col">
								<p>Added Skills</p>
								
							</div>
						</div>
					</div>

					<div class="form-group">
						<div class="form-check py-1">
			    			{{ form.active }}
			    			<label class="form-check-label">Would you like to post this job right after creating it?</label>
				    	</div>
					</div>

					<input type="submit" class="btn btn-primary" value="Create">

				</form>
			</div>
		</div>
		<div class="col-2"></div>
	</div>
	
	<script type="text/javascript">
		function init() {
			var input = document.getElementById('location-input');
            var autocomplete = new google.maps.places.Autocomplete(input);
		}
		google.maps.event.addDomListener(window, 'load', init);

		// listens for change in the find skills input text
		$('#skill-search').keyup(function() {
			console.log('skills search changed')
			$.ajax({
		        url: '/skills/search/',
		        data: {
		          'skill_string': $(this).val()  
		        },
		        dataType: 'json',
		        success: function (data) {
		        	console.log('success')
		        	console.log(data) 
		        }
      		})	
		})

	</script>

	
{% endblock %}







